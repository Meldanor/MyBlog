---
import fetchApi from '../lib/strapi';
import type Post from '../interfaces/post';
import MainLayout from '../layouts/Layout.astro';
import BlogList from '../components/BlogList.astro';
import BlogHead from '../components/BlogHead.astro';

const posts = await fetchApi<Post[]>({
  endpoint: 'posts?populate=mainImage,category', // the content type to fetch
  wrappedByKey: 'data' // the key to unwrap the response
});
---

<MainLayout title="Mel's Blog">
  <BlogHead />
  <BlogList posts={posts} />
</MainLayout>
